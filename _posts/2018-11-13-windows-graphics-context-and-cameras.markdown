---
layout: post
title:  "Введение в OpenSceneGraph: Окна, графический контекст и камеры"
date:   2018-11-13 16:00:00 +0300
categories: jekyll update
---

Мы уже говорили о том, что класс osg::Camera управляет связанным с ни графическим контекстом OpenGL. Графический контекст инкапсулирует информацию о том, как и куда происходит отрисовка объектов и какие атрибуты состояния к ним применяются. Под контекстом понимают графическое окно, вернее его клиентскую область, или пиксельный буфер OpenGL, который хранит данные пикселей без передачи их в кадровый буфер.

OSG использует класс osg::GraphicsContext для представления абстрактного графического контекста, и класс osg::GraphicsWindow, для представления абстрактного графического окна. Последния имеет метод getEventQueue() для управления событиями от элементов GUI. Вообще говоря графический контекст есть платформоспецифичное понятие, поэтому большую часть работы по сосзданию окна и связыванию его контекста с контекстом OpenGL, OSG берет на себя. При вызове метода createGraphicsContext() класса osg::GraphicsContext() требуемый код (а его не мало, поверьте!) будет сгенерирован препроцессором автоматически, в зависимости от платформы. От нас лишь требуется передать этому методу аргумент типа osg::GraphicsContex::Traits, содержащий описание того, какое окно мы хотим получить.

## Класс osg::GraphicsContext::Traits

Слово "traits" в переводе с английского означает "черты". Так вот, вышеупомянутый класс описывает черты будущего окна, и содержит все свойства для описания графического контекста. Он отличается от класса osg::DisplaySettings, который управляет характеристиками всех графических контекстов для вновь созданных камер. Основные публичные свойства этого класса перечислены в таблице ниже

|-------------------|-----------------------------|---------------------|----------------------------------------------------------------|
|Атрибут класса     |Тип                          |Значение по-умолчанию|Описание                                                        |
|-------------------|-----------------------------|---------------------|----------------------------------------------------------------|
|x                  |int                          |0                    |Начальная горизонтальная позиция окна                           |
|y                  |int                          |0                    |Начальная вертикальная позиция окна                             |
|width              |int                          |0                    |Ширина окна                                                     |
|height             |int                          |0                    |Высота окна                                                     |
|windowName         |std::string                  |""                   |Заголовок окна                                                  |
|windowDecoration   |bool                         |false                |Флаг отображения заголовка окна                                 |
|red                |unsigned int                 |8                    |Число бит красного в буфере цвета OpenGL                        |
|green              |unsigned int                 |8                    |Число бит зеленого в буфере цвета OpenGL                        |
|blue               |unsigned int                 |8                    |Число бит синего в буфере цвета OpenGL                          |
|alpha              |unsigned int                 |8                    |Число бит в альфа-буфере OpenGL                                 |
|depth              |unsigned int                 |24                   |Число бит в буфере глубины OpenGL                               |
|stencil            |unsigned int                 |0                    |Число бит в буфере трафарета OpenGL                             |
|doubleBuffer       |bool                         |false                |Использвать двойной буфер                                       |
|samples            |unsigned int                 |0                    |Число примитивом сглаживания                                    |
|quadBufferStereo   |bool                         |false                |Использовать счетверенный стерео-буфер (для оборудования NVidia)|
|inheritedWindowData|osg::ref_ptr<osg::Referenced>|NULL                 |Описатель данных, ассоциированных с окном                       |